<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Code 1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  
    
</head>
<body>
    <canvas id="canvas" width=600 height=600></canvas>
    <script>
            /*********************************************
                     INITIAL SETUP
            **********************************************/

            var canvas = document.getElementById('canvas');
            gl = canvas.getContext('experimental-webgl');

            // make canvas 1x1 with display
            // gl.canvas.width  = gl.canvas.clientWidth  * window.devicePixelRatio;
            // gl.canvas.height = gl.canvas.clientHeight * window.devicePixelRatio;
            gl.viewport(0, 0, canvas.width, canvas.height);

            gl.clearColor(0.5, 0.5, 0.5, 1);
            gl.enable(gl.DEPTH_TEST);
            gl.clear(gl.COLOR_BUFFER_BIT);

            /*********************************************
                     CREATE SHADER PROGRAMS
            **********************************************/


            /**********Vertex Shader**********************/
            var vertCode =
                'precision mediump float;'+
                'attribute vec4 position;'+
    
                'void main(void) {'+
                //  'gl_Position = (position * (u_inverseTranslate*u_inverseRotate*u_reflect*u_rotate*u_translate));'+
                'gl_Position = position;'+
                   'gl_PointSize = 1.0;'+
                '}';

            var vertShader = gl.createShader(gl.VERTEX_SHADER);
            gl.shaderSource(vertShader, vertCode);
            gl.compileShader(vertShader);

            /**********Fragment Shader**********************/
            var fragCode =
                'precision mediump float;'+
                'void main(void) { '+
                'gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);'+
            
            '}';
            var fragShader = gl.createShader(gl.FRAGMENT_SHADER);
            gl.shaderSource(fragShader, fragCode);
            gl.compileShader(fragShader);

            var shaderProgram = gl.createProgram();
            gl.attachShader(shaderProgram, vertShader); 
            gl.attachShader(shaderProgram, fragShader);
            gl.linkProgram(shaderProgram);
            gl.useProgram(shaderProgram);

            /*********************************************
                     LINE VERTICES
            **********************************************/
            const x1 = -0.3, x2 = 0.6, y1 = -0.2, y2 = 0.8;
            var lineVertices = [
                x1,y1,0,
                x2,y2,0
            ];
            const m = (y2 - y1) / (x2 - x1);
            const b = y2 - (m * x2);
            const angleRadian = Math.atan(m);
            const angleDegree = angleRadian * 180 / Math.PI;
            console.log(m,b,angleRadian,angleDegree);

            /*********************************************
                     SQUARE VERTICES
            **********************************************/
            var squareVertices = [
                 -0.1,0.4,0,
                 0.2,0.4,0,

                 -0.1,0.4,0,
                 -0.1,0.6,0,

                 -0.1,0.6,0,
                  0.2,0.6,0,

                  0.2,0.6,0,
                  0.2,0.4,0
            ];
           
            /*********************************************
                     BINDING VERTICES WITH SHADERS
            **********************************************/

            function drawElement(type,vertices,len) {
                var vertexBuffer = gl.createBuffer();
                gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices),gl.STATIC_DRAW);
                
                var position = gl.getAttribLocation(shaderProgram, 'position');
                gl.vertexAttribPointer(position, 3, gl.FLOAT, false, 0, 0);
                gl.enableVertexAttribArray(position);
                gl.drawArrays(type, 0, len);
            }

            /*********************************************
                     DRAW LINES AND SQUARE
            **********************************************/
            drawElement(gl.LINES,lineVertices,2);
            drawElement(gl.LINES,squareVertices,8);

    </script>
    
</body>
</html>